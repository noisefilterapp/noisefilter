function handleError(e){console.error(`Error: ${e}`)}const labelChar={limit:18,adjust:15},tooltipInfo={coverageActive:"Domain coverage is active",coveragePaused:"Domain coverage is paused",noCoverage:"No coverage for the current domain"},iconClass="hideIcon",button={pauseExt:void 0,playExt:void 0,domainToggle:void 0,info:void 0},uiSwitch={label:void 0,tooltip:void 0};function getDomElementRefs(){button.pauseExt=document.getElementById("pauseExt"),button.playExt=document.getElementById("playExt"),button.domainToggle=document.getElementById("switchRoundedSuccess"),button.info=document.getElementById("infoTool"),uiSwitch.label=document.getElementById("switchLabel"),uiSwitch.tooltip=document.getElementById("fieldTooltip")}const pausedState={ext:void 0,domain:void 0,coverage:void 0},tooltipState={currentMsg:tooltipInfo.noCoverage,isDisplayed:!1};function initPauseBTN(){button.pauseExt.addEventListener("click",e=>{pausedState.ext||pauseExt()})}function initPlayBTN(){button.playExt.addEventListener("click",e=>{pausedState.ext&&unpauseExt()})}function initDomainToggle(){button.domainToggle.addEventListener("change",e=>{switchDomainToggle()})}function initInfoClick(){button.info.addEventListener("click",e=>{tooltipState.isDisplayed?handleHideTooltip():pausedState.coverage?setTooltipDisplay(tooltipInfo.noCoverage):pausedState.ext||pausedState.domain?setTooltipDisplay(tooltipInfo.coveragePaused):setTooltipDisplay(tooltipInfo.coverageActive)})}function initInfoHover(){button.info.addEventListener("mouseleave",e=>{handleHideTooltip()})}function handleInit(e){handleExtPaused(e.ext),handleDomainPaused(e.domain),handleLabelURL(e.host,e.url),handleCoverage(e.inject)}function pauseExt(){setExtPaused(!0),communicateExtPaused(!0),hidePauseBTN(),displayPlayBTN(),disableDomainToggle()}function unpauseExt(){setExtPaused(!1),communicateExtPaused(!1),hidePlayBTN(),displayPauseBTN(),pausedState.coverage||enableDomainToggle()}function switchDomainToggle(){setDomainPaused(!button.domainToggle.checked),communicateDomainPaused(pausedState.domain)}function handleExtPaused(e){setExtPaused(e),e?(disableDomainToggle(),hidePauseBTN()):hidePlayBTN()}function handleDomainPaused(e){setDomainPaused(e),e&&setDomainToggle(!1)}function handleCoverage(e){setCoveragePaused(!e),pausedState.coverage&&(setDomainToggle(!1),disableDomainToggle())}function hidePlayBTN(){addClass(button.playExt,iconClass)}function hidePauseBTN(){addClass(button.pauseExt,iconClass)}function displayPlayBTN(){removeClass(button.playExt,iconClass)}function displayPauseBTN(){removeClass(button.pauseExt,iconClass)}function enableDomainToggle(){removeAttribute(button.domainToggle,"disabled")}function disableDomainToggle(){addAttribute(button.domainToggle,"disabled")}function setTooltipDisplay(e){setTooltipIsDisplayed(!0),setCurrentTooltipMsg(e),setFieldTooltip(e)}function handleHideTooltip(){setTooltipIsDisplayed(!1),hideTooltip()}function handleLabelURL(e,t){0===e.length?displayLabelURL(t):displayLabelURL(e=e.replace("www.",""))}function displayLabelURL(e){e.length>labelChar.limit?uiSwitch.label.textContent=e.slice(0,labelChar.adjust).concat("..."):uiSwitch.label.textContent=e}function communicateExtPaused(e){browser.runtime.sendMessage({re:"extPaused",extPaused:e})}function communicateDomainPaused(e){browser.runtime.sendMessage({re:"domainPaused",domainPaused:e})}function getPopupInitData(){browser.runtime.sendMessage({re:"init"}).then(handleInit,handleError)}function setDomainToggle(e){button.domainToggle.checked=e}function setDomainPaused(e){pausedState.domain=e}function setExtPaused(e){pausedState.ext=e}function setCoveragePaused(e){pausedState.coverage=e}function setCurrentTooltipMsg(e){tooltipState.currentMsg=e}function setTooltipIsDisplayed(e){tooltipState.isDisplayed=e}function addClass(e,t){e.classList.add(t)}function removeClass(e,t){e.classList.remove(t)}function addAttribute(e,t){e.setAttribute(t,!0)}function removeAttribute(e,t){e.removeAttribute(t)}function setFieldTooltip(e){uiSwitch.tooltip.setAttribute("data-tooltip",e)}function hideTooltip(){uiSwitch.tooltip.removeAttribute("data-tooltip",tooltipState.currentMsg)}document.addEventListener("DOMContentLoaded",()=>{getDomElementRefs(),getPopupInitData(),initPauseBTN(),initPlayBTN(),initDomainToggle(),initInfoClick(),initInfoHover()});